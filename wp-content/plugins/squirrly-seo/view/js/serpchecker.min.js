var $jscomp=$jscomp||{};$jscomp.scope={};$jscomp.findInternal=function(b,a,c){b instanceof String&&(b=String(b));for(var e=b.length,d=0;d<e;d++){var f=b[d];if(a.call(c,f,d,b))return{i:d,v:f}}return{i:-1,v:void 0}};$jscomp.ASSUME_ES5=!1;$jscomp.ASSUME_NO_NATIVE_MAP=!1;$jscomp.ASSUME_NO_NATIVE_SET=!1;$jscomp.defineProperty=$jscomp.ASSUME_ES5||"function"==typeof Object.defineProperties?Object.defineProperty:function(b,a,c){b!=Array.prototype&&b!=Object.prototype&&(b[a]=c.value)};
$jscomp.getGlobal=function(b){return"undefined"!=typeof window&&window===b?b:"undefined"!=typeof global&&null!=global?global:b};$jscomp.global=$jscomp.getGlobal(this);$jscomp.polyfill=function(b,a,c,e){if(a){c=$jscomp.global;b=b.split(".");for(e=0;e<b.length-1;e++){var d=b[e];d in c||(c[d]={});c=c[d]}b=b[b.length-1];e=c[b];a=a(e);a!=e&&null!=a&&$jscomp.defineProperty(c,b,{configurable:!0,writable:!0,value:a})}};
$jscomp.polyfill("Array.prototype.find",function(b){return b?b:function(a,b){return $jscomp.findInternal(this,a,b).v}},"es6","es3");
(function(b){b.fn.sq_serpChecker=function(){var a=this;a.listenRefresh=function(c){a.find("#sq_rank_column_button_recheck"+c).hide();a.find("#sq_rank_value"+c).html("").addClass("sq_minloading");b.post(sqQuery.ajaxurl,{action:"sq_serp_recheck",post_id:c,nonce:sqQuery.nonce}).done(function(b){a.find("#sq_rank_value"+c).removeClass("sq_minloading");"undefined"!==typeof b.rank?a.find("#sq_rank_value"+c).html(b.rank).removeClass("sq_loading"):a.find("#sq_rank_value"+c).html("Error").removeClass("sq_minloading");
a.find("#sq_rank_column_button_recheck"+c).show()}).fail(function(){a.find("#sq_rank_value"+c).html("Error").removeClass("sq_minloading");a.find("#sq_rank_column_button_recheck"+c).show()},"json")};a.processPosts=function(){return b.post(sqQuery.ajaxurl,{action:"sq_serp_process",nonce:sqQuery.nonce}).done(function(b){a.trigger("sq_serp_progress",[b])}).fail(function(){b(this).removeClass("sq_minloading")},"json")};a.listenRecheck=function(){a.find(".sq_rank_refresh").on("click",function(){var c=b(this),
e=b(this).data("id"),d=b(this).data("keyword");c.addClass("sq_minloading");a.find("#sq_rank_value"+e).addClass("sq_minloading");b.post(sqQuery.ajaxurl,{action:"sq_serp_refresh_post",id:e,keyword:d,nonce:sqQuery.nonce}).done(function(d){"undefined"!==typeof d.rank?a.find("#sq_rank_value"+e).html(d.rank):b.sq_showMessage(d.error).addClass("sq_error");c.removeClass("sq_minloading");a.find("#sq_rank_value"+e).removeClass("sq_minloading")}).fail(function(){c.removeClass("sq_minloading");a.find("#sq_rank_value"+
e).removeClass("sq_minloading")},"json")})};a.listenButtons=function(){a.find(".sq_serp_sendnow").on("click",function(){var c=b(this);c.addClass("sq_minloading");a.processPosts();a.on("sq_serp_progress",function(b,d){c.removeClass("sq_minloading");"undefined"!==typeof d.progress&&(100==d.progress?(location.reload(),a.find(".sq_serp_progress").hide(),a.find(".sq_serp_update").show()):(a.find(".sq_serp_progress").find(".progress-bar").css("width",d.progress+"%"),a.find(".sq_serp_progress").show(),a.find(".sq_serp_update").hide(),
a.processPosts()))})});a.find(".sq_serp_refresh").on("click",function(){b(this).addClass("sq_minloading");b.post(sqQuery.ajaxurl,{action:"sq_serp_refresh",nonce:sqQuery.nonce}).done(function(a){"undefined"!==typeof a.refreshed&&location.reload()}).fail(function(){b(this).removeClass("sq_minloading")},"json")});a.find(".sq_serp_settings").on("click",function(){location.href="?page=sq_settings#ranking"})};a.listenAddKeyword=function(){a.find("#sq_save_keyword").on("click",function(){var c=b(this);""==
a.find("#sq_article").val()?alert("Please add an Article URL first"):""==a.find("#sq_keyword").val()?alert("Please add the keyword first"):(c.addClass("sq_minloading"),b.post(sqQuery.ajaxurl,{action:"sq_serp_addkeyword",keyword:a.find("#sq_keyword").val(),post_url:a.find("#sq_article").val(),nonce:sqQuery.nonce}).done(function(a){c.removeClass("sq_minloading");"undefined"!==typeof a.sent?location.reload():"undefined"!==typeof a.error?alert(a.error):alert("Could not save the keyword")}).fail(function(){c.removeClass("sq_minloading");
alert("Could not save the keyword")},"json"))})};a.listenIgnore=function(){a.find(".ignore-keyword").on("change",function(){b.post(sqQuery.ajaxurl,{action:"sq_serp_ignore",keyword:b(this).data("keyword"),active:b(this).prop("checked")?1:0,nonce:sqQuery.nonce}).done(function(a){"undefined"!==typeof a.saved&&b.sq_showMessage().addClass("sq_success")}).fail(function(){},"json")})};a.listenButtons();a.listenIgnore();a.listenAddKeyword();a.listenRecheck();a.on("sq_serp_recheck",function(b,e){a.listenRefresh(e)});
a.find("input[name=sq_show_ignored]").on("change",function(){a.find("form[name=sq_form]").submit()});Array.prototype.slice.call(document.querySelectorAll(".js-switch")).forEach(function(a){new Switchery(a)});a.find("select[name=sq_mode]").on("change",function(){a.find(".tab-panel").hide();a.find(".src_"+b(this).val()).show()});a.find('[data-toggle="tooltip"]').tooltip();return a};b(document).ready(function(){b("#src_settings").sq_serpChecker()})})(jQuery);
